{% extends "base.html" %}
{% block title %}My Proposals - Write It Great{% endblock %}

{% block extra_css %}
.start-section {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    padding: 2.5rem 2rem;
    border-bottom: 4px solid var(--accent);
}
.start-section h2 { color: var(--accent); font-size: 1.125rem; margin-bottom: 0.375rem; }
.start-section p  { color: rgba(255,255,255,0.8); font-size: 0.9375rem; margin-bottom: 1.25rem; }
.path-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; max-width: 640px; }
@media (max-width: 600px) { .path-cards { grid-template-columns: 1fr; } }
.path-card {
    background: rgba(255,255,255,0.07);
    border: 1.5px solid rgba(255,255,255,0.18);
    border-radius: var(--radius);
    padding: 1.25rem 1.5rem;
    text-decoration: none;
    color: white;
    transition: all 0.2s;
    display: block;
}
.path-card:hover { background: rgba(255,255,255,0.14); border-color: var(--accent); transform: translateY(-2px); }
.path-card .pc-icon  { font-size: 1.75rem; margin-bottom: 0.5rem; }
.path-card .pc-title { font-size: 1rem; font-weight: 700; margin-bottom: 0.25rem; }
.path-card .pc-desc  { font-size: 0.8125rem; opacity: 0.8; line-height: 1.45; }
.path-card.accent-card { background: var(--accent); border-color: var(--accent); color: var(--accent-text); }
.path-card.accent-card:hover { background: var(--accent-dark); border-color: var(--accent-dark); }
.path-card.accent-card .pc-desc { opacity: 0.75; }
{% endblock %}

{% block content %}

<!-- Start New Project (always shown at top) -->
<section class="start-section">
    <div style="max-width:1200px;margin:0 auto;">
        <h2>Start a New Project</h2>
        <p>Where are you in your writing journey?</p>
        <div class="path-cards">
            <a href="{{ url_for('index') }}" class="path-card accent-card">
                <div class="pc-icon">ðŸ“„</div>
                <div class="pc-title">I have a book proposal</div>
                <div class="pc-desc">Upload your finished proposal for a full expert evaluation, scoring, and advance estimate.</div>
            </a>
            <a href="{{ url_for('coach') }}" class="path-card">
                <div class="pc-icon">ðŸ’¬</div>
                <div class="pc-title">I'm developing my idea</div>
                <div class="pc-desc">Work one-on-one with our AI coach to build your proposal section by section through conversation.</div>
            </a>
        </div>
    </div>
</section>

<!-- Existing proposals -->
<div class="container" style="margin-top:2rem;">
    {% if proposals %}
    <h3 style="color:var(--primary);margin-bottom:1rem;">Your Proposals</h3>
    <div style="display:grid;gap:1rem;">
        {% for p in proposals %}
        <a href="{{ url_for('author_proposal_detail', submission_id=p.submission_id) }}" class="card" style="text-decoration:none;color:inherit;display:block;transition:box-shadow 0.2s;">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;">
                <div style="flex:1;min-width:200px;">
                    <h3 style="margin:0;color:var(--primary);">{{ p.book_title }}</h3>
                    <p style="margin:0.25rem 0 0;font-size:0.875rem;color:var(--gray-500);">
                        Submitted {{ p.submitted_at.strftime('%B %d, %Y') if p.submitted_at else 'N/A' }}
                    </p>
                </div>
                <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;">
                    {% if p.tier %}
                    <span class="tier-badge tier-{{ p.tier|lower }}">{{ p.tier }}-Tier</span>
                    {% endif %}
                    {% if p.overall_score is not none %}
                    <span style="font-weight:700;color:var(--primary);">{{ p.overall_score|round|int }}/100</span>
                    {% endif %}
                    {% set friendly = status_labels.get(p.status, p.status) %}
                    <span class="status-badge {{ p.status }}">{{ friendly }}</span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state" style="padding-top:1rem;">
        <p style="color:var(--gray-500);">No proposals submitted yet â€” choose a path above to get started.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
